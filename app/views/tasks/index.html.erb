<h2 class="font-weight-bold">タスク一覧</h2>
<p class="text-center"><%= flash[:notice] %></p>

<%= form_with(url: tasks_path, local:true, method: :get) do |form| %>
  <%= form.label :query, "タイトルで検索:" %>
  <%= form.text_field :query %>
  <%= form.submit "検索", class: "btn btn-secondary" %>
<% end %>

<table class="table">
  <thread>
    <tr>
      <th>タイトル</th>
      <th>内容</th>
      <th><%= link_to "終了期限", tasks_path(deadline: "true") %></th>
      <th>ステータス</th>
      <th>作成日時</th>
    </tr>
  </thread>
      <tbody>
      <% @tasks.each do|task| %>
        <tr>
        <td><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= task.deadline %></td>
        <td><%= task.priority %></td>
        <td><%= l task.created_at, format: :short %></td>
        <td><button type="button" class="btn btn-outline-info"><%= link_to '詳細確認', task_path(task.id) %></button></td>
        <td><button type="button" class="btn btn-outline-success"><%= link_to "編集", edit_task_path(task.id) %></button></td>
        <td><button type="button" class="btn btn-outline-danger"><%= link_to "削除", task_path(task.id), method: :delete, data: {confirm: '本当に削除しますか？'} %></button></td>
      </tr>
      <% end %>
      </tbody>
</table>

<%= link_to "新規タスク登録", new_task_path, class: "btn btn-warning" %>
<%= link_to "一覧に戻る", tasks_path, class: "btn btn-secondary" %>